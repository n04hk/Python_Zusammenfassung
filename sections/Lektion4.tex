%\part*{Lektion 4: Listen-Abstraktion, Generatoren und Ähnliches}

\section[Listen-Abstraktion/List-Comprehension]{Listen-Abstraktion/List-Comprehension \tiny{Kap. 31}}
\begin{itemize}
	\item Einfache Methode, um Listen zu erzeugen
	\begin{itemize}
		\item aus Strings, Dictionaries, Mengen, Bytes, ...
		\item bestehende Listen abändern
		\item bestehende Listen filtern
	\end{itemize}
	\item Alles auf einer Zeile
	\begin{itemize}
		\item übersichtlicher Code
	\end{itemize}
\end{itemize}

\subsection{Neue Liste aus einer bestehenden Liste ableiten}

Beispiel 1:\\
\begin{minipage}[t]{0.49\textwidth}
	\textbf{konventionell:}
	\lstinputlisting{listings/v4_list1.py}
\end{minipage}
\begin{minipage}[t]{0.02\textwidth} $ \quad $\end{minipage}
\begin{minipage}[t]{0.49\textwidth}
	\textbf{mit Listen-Abstraktion:}
	\lstinputlisting{listings/v4_list2.py}
\end{minipage}

Beispiel 2:\\
\begin{minipage}[t]{0.49\textwidth}
	\textbf{konventionell:}
	\lstinputlisting{listings/v4_list3.py}
\end{minipage}
\begin{minipage}[t]{0.02\textwidth} $ \quad $\end{minipage}
\begin{minipage}[t]{0.49\textwidth}
	\textbf{mit Listen-Abstraktion:}
	\lstinputlisting{listings/v4_list4.py}
\end{minipage}

\subsection{Bestehende Liste filtern}
Beispiel: Nur Früchte behalten, deren Name mit A, B oder C beginnen.
\lstinputlisting{listings/v4_list5.py}

\subsection{Liste von Zahlen => formatierter String}

\textbf{konventionell:}
\lstinputlisting{listings/v4_list6.py}
\textbf{mit Listen-Abstraktion:}
\lstinputlisting{listings/v4_list7.py}

\subsection{Liste der Schachbrettfelder}
\begin{minipage}[t]{0.39\textwidth}
	\textbf{konventionell:}
	\lstinputlisting{listings/v4_list8.py}
\end{minipage}
\begin{minipage}[t]{0.02\textwidth} $ \quad $\end{minipage}
\begin{minipage}[t]{0.59\textwidth}
	\textbf{mit Listen-Abstraktion:}
	\lstinputlisting{listings/v4_list9.py}
\end{minipage}


\subsection{Mengen-Abstraktion/Set Comprehension}

\subsubsection{Produkte zweier Zahlen}
\begin{minipage}[t]{0.39\textwidth}
	\textbf{konventionell:}
	\lstinputlisting{listings/v4_list10.py}
\end{minipage}
\begin{minipage}[t]{0.02\textwidth} $ \quad $\end{minipage}
\begin{minipage}[t]{0.59\textwidth}
	\textbf{mit Mengen-Abstraktion:}
	\lstinputlisting{listings/v4_list11.py}
\end{minipage}



\section[Iteratoren und Generatoren]{Iteratoren und Generatoren \tiny{Kap. 32}}
\begin{itemize}
	\item Iterator
	\begin{itemize}
		\item greift nacheinander auf die Elemente einer Menge von Objekten zu
		\item fundamentaler Bestandteil von Python, z.B. in \texttt{for}-Schleifen
	\end{itemize}
	\item Generator
	\begin{itemize}
		\item ist eine besondere Art, um einen Iterator zu implementieren
		\item wird mittels einer speziellen Funktion erzeugt
	\end{itemize}
\end{itemize}

\begin{minipage}[t]{0.59\textwidth}
	\subsection{Iteratoren}
	Iteratoren werden benutzt, um über einen Container zu iterieren.\\
	Die for-Schleife erzeugt aus dem Listen-Objekt einen Iterator:
\end{minipage}
\begin{minipage}[t]{0.02\textwidth} $ \quad $\end{minipage}
\begin{minipage}[t]{0.39\textwidth}
	\lstinputlisting{listings/v4_iter1.py}
\end{minipage}

Ein Iterator muss auch die \texttt{\_\_next\_\_()}-Funktion implementieren. Das nächste Element kann dann mit \texttt{next()} extrahiert werden.\\
Beispiel:
\lstinputlisting{listings/v4_iter4.py}

\begin{minipage}[t]{0.44\textwidth}
	\subsection{Generatoren}
	Ein Generator ist auch ein Iterator.\\
	Ein Generator wird erstellt, indem man eine Funktion aufruft, die eine oder mehrere \texttt{yield}-Answeisungen hat.\\
	Bei der \texttt{yield}-Anweisung wird die Funktion (wie mit return) verlassen, aber Python merkt sich den Zustand der lokalen Variable und wo der Generator verlassen wurde.
\end{minipage}
\begin{minipage}[t]{0.02\textwidth} $ \quad $\end{minipage}
\begin{minipage}[t]{0.54\textwidth}
	\lstinputlisting{listings/v4_iter7.py}
\end{minipage}

\begin{minipage}[t]{0.44\textwidth}
		\subsubsection{Generator-Expression}
	Ein Generator kann auch mit einem Ausdruck definiert werden:
\end{minipage}
\begin{minipage}[t]{0.02\textwidth} $ \quad $\end{minipage}
\begin{minipage}[t]{0.54\textwidth}
	\lstinputlisting{listings/v4_iter9.py}
\end{minipage}



\subsubsection{\texttt{send()}-Methode, Generator als Coroutine}
Die \texttt{send()}-Methode verhält sich im Prinzip wie die \texttt{next()}-Methode, aber sendet gleichzeitig noch einen Wert an den Generator:

\lstinputlisting{listings/v4_iter10.py}

\section[Listen und Tupel im Detail]{Listen und Tupel im Detail \tiny{Kap. 16}}
\begin{minipage}[t]{0.49\textwidth}
	
	\begin{itemize}
		\item Tupel
		\begin{itemize}
			\item Packing
			\item Unpacking
		\end{itemize}
		\item Listen
		\begin{itemize}
			\item Elemente hinzufügen
			\item Sortieren
		\end{itemize}
	\end{itemize}
\end{minipage}
\begin{minipage}[t]{0.02\textwidth} $ \quad $\end{minipage}
\begin{minipage}[t]{0.49\textwidth}
	\subsection{Tupel}
	\lstinputlisting{listings/v4_tupel1.py}
\end{minipage}

\begin{minipage}[t]{0.49\textwidth}
	Packing:
	\lstinputlisting{listings/v4_tupel4.py}
\end{minipage}
\begin{minipage}[t]{0.02\textwidth} $ \quad $\end{minipage}
\begin{minipage}[t]{0.49\textwidth}
	Unpacking:
	\lstinputlisting{listings/v4_tupel5.py}
\end{minipage}
Packing mit Rest:
\lstinputlisting{listings/v4_tupel6.py}

\subsection{Listen}

\begin{minipage}[t]{0.49\textwidth}
	\subsubsection{Element hinzufügen}
	\lstinputlisting{listings/v4_tupel7.py}
	\subsubsection{Elemente ersetzen}
	\lstinputlisting{listings/v4_tupel10.py}
\end{minipage}
\begin{minipage}[t]{0.02\textwidth} $ \quad $\end{minipage}
\begin{minipage}[t]{0.49\textwidth}
	\subsubsection{Mehrere Elemente hinzufügen}
	\lstinputlisting{listings/v4_tupel8.py}
	Mehrere Elemente zwischendrin einfügen:
	\lstinputlisting{listings/v4_tupel9.py}
\end{minipage}


\subsubsection{Element entfernen}
\lstinputlisting{listings/v4_tupel13.py}


\begin{minipage}[t]{0.49\textwidth}
	\subsection{Sortieren}
	\texttt{sorted()} liefert eine neue sortierte Liste zurück:
	\lstinputlisting{listings/v4_tupel14.py}
	\texttt{sort()} modifiziert die Liste selbst (In-Place-Sortierung):
	\lstinputlisting{listings/v4_tupel15.py}
\end{minipage}
\begin{minipage}[t]{0.02\textwidth} $ \quad $\end{minipage}
\begin{minipage}[t]{0.49\textwidth}
	\subsubsection{Umgekehrte Reihenfolge}
	\lstinputlisting{listings/v4_tupel16.py}
	
	\subsubsection{Mit spezieller Funktion}
	\lstinputlisting{listings/v4_tupel17.py}
\end{minipage}


\subsubsection{\texttt{collections.deque}}
Falls ein Stack oder FIFO-Buffer mit folgenden Eigenschaften benötigt wird:\\
$\bullet$ Thread-sicher $\quad \bullet$ Speicher-optimiert $\quad \bullet$ schnell\\
\url{https://docs.python.org/3/library/collections.html#collections.deque}
\lstinputlisting{listings/v4_tupel18.py}

\begin{minipage}[t]{0.49\textwidth}
	\section[lambda, map, filter und reduce]{lambda, map, filter und reduce \tiny{Kap. 30}}
	\begin{itemize}
		\item lambda
		\begin{itemize}
			\item anonyme Funktionen bauen
		\end{itemize}
		\item map, filter und reduce
		\begin{itemize}
			\item Für die funktionale Programmierung
			\item auch mit List Comprehension möglich
		\end{itemize}
	\end{itemize}
\end{minipage}
\begin{minipage}[t]{0.02\textwidth} $ \quad $\end{minipage}
\begin{minipage}[t]{0.49\textwidth}
	\subsection{lambda}
	\texttt{lambda} definiert eine anonyme Funktionen.
	\lstinputlisting{listings/v4_tupel19.py}
\end{minipage}


\subsection{map}
\begin{minipage}[t]{0.49\textwidth}
	sequenz = map(funktion, sequenz)\\
	Wendet die Funktion auf alle Elemente der Sequenz an und gibt die Resultate als Sequenz zurück.
	\lstinputlisting{listings/v4_tupel20.py}
\end{minipage}
\begin{minipage}[t]{0.02\textwidth} $ \quad $\end{minipage}
\begin{minipage}[t]{0.49\textwidth}
	Funktion mit zwei Parametern benötigt zwei Listen:
	\lstinputlisting{listings/v4_tupel21.py}
\end{minipage}

\subsection{filter}
sequenz = filter(funktion, sequenz)\\
Wendet die Funktion auf alle Elemente der Sequenz an und gibt nur diejenige Elemente zurück, für die die Funktion \texttt{True} liefert.
\lstinputlisting{listings/v4_tupel22.py}

\subsection{reduce}
resultat = reduce(funktion, sequenz)\\
Wendet die Funktion (mit zwei Parametern) fortlaufen auf die Sequenz an und liefert einen einzelnen Wert zurück.
\lstinputlisting{listings/v4_tupel23.py}